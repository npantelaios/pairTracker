<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="../css/basic.css">

    <script src="../js/loadImagesSequentially.js"></script>

    <script src="../scripts/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"></script>
    <!-- <script data-main="scripts/app" src="scripts/require.js"></script> -->


    <title>POKEMAS PAIRS</title>
  </head>

  <!-- BODY STARTS-->
  <body style="background-color: aquamarine;" onload="loadImagesSequential('../images/masterfairs',6,'masterfairs','../images/')">

    <div>
      <button  style="font-size:40px" onclick="location.href = '../index.html';" id="myButton" class="float-left submit-button" >AllGacha</button>
      <button  style="font-size:40px" onclick="location.href = 'eggmons.html';" id="myButton" class="float-left submit-button" >Eggmons</button>
      <button  style="font-size:40px" onclick="location.href = 'limited.html';" id="myButton" class="float-left submit-button" >LimitedAll</button>
      <button  style="border:10px solid black;font-size:40px" onclick="location.href = 'masterfair.html';" id="myButton" class="float-left submit-button" >MasterFair</button>
      <button  style="font-size:40px" onclick="location.href = 'pokefair.html';" id="myButton" class="float-left submit-button" >PokeFair</button>    
      <button  style="font-size:40px" onclick="location.href = 'seasonal.html';" id="myButton" class="float-left submit-button" >Seasonal</button>
      <!-- <button  style="font-size:40px" onclick="location.href = 'f2p.html';" id="myButton" class="float-left submit-button" >F2P</button> -->
      <!-- <button  style="font-size:40px" onclick="location.href = 'html/males.html';" id="myButton" class="float-left submit-button" >Females</button>
      <button  style="font-size:40px" onclick="location.href = 'html/females.html';" id="myButton" class="float-left submit-button" >Males</button> -->


  </div>

  <h2>WHICH PAIRS DO YOU OWN? </h2>
  <h3 class="pairCount" style="border: 12px solid red; font-size: 40px; width: 200px; text-align:center;"></h3>
  
  <script type="text/javascript">

    function takeshot() {
        let tableDiv = document.getElementById('table0');
        console.log(tableDiv.length)
        let tableDivParent = tableDiv.parentElement;
        const belowDiv = document.createElement("h1")
        const belowDivText = document.createTextNode("Save image ABOVE with RIGHT CLICK");
        belowDiv.appendChild(belowDivText)

        html2canvas(tableDiv).then(
            function (canvas) {

              console.log(canvas.width)
              console.log(canvas.height)
              let pnGImage = new Image();
              pnGImage.src = canvas.toDataURL();
              pnGImage.style.border = "12px solid red";
              document.getElementById("output").href = pnGImage.src
              document.getElementById("output").appendChild(pnGImage);

              tableDivParent.insertBefore(belowDiv, tableDiv);
            })
    }
</script>

<button id='screenshotBtn' onclick="takeshot()" style="font-size:40px">
    Take Screenshot 
</button>

<h1>Screenshot will appear BELOW - RIGHT CLICK TO SAVE IMAGE</h1>
<!-- <div id="output"></div> -->
<a id="output" href="" download="AwesomeImage.png" ></a>



<button id='clearBtn' onclick="resetLocalstorage()" style="font-size:40px">
  Reset 
</button>

<script>
  var htmlName = "masterfairs"
  // Will execute myCallback every 1 second
  var intervalLocalstorage = window.setInterval(localstorageCallback, 500);

  function localstorageCallback() {
    let myTable = document.getElementsByClassName("table1")
    if(myTable.length > 0){
      localStorage.setItem("myTable"+htmlName, myTable[0].outerHTML);
    }
  }

  var intervalPaircounter = window.setInterval(paircounterCallback, 1000);
  function paircounterCallback() {
    var images = document.getElementsByClassName("img1");
    var totalPairs = String(images.length);
    var cnt = 0;
    for (i=0; i<images.length; i++){
      if (images[i].src.indexOf("bw_") === -1){
        cnt ++;
      }
    }
    var activePairs = String(cnt);
    var countPairElmt = document.getElementsByClassName("pairCount")[0]
    countPairElmt.innerHTML = activePairs + '/' + totalPairs;
  }

</script>


</body>
</html>